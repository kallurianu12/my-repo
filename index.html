<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Birthday Surprise for Kalyan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;600&display=swap" rel="stylesheet"/>

  <style>
    :root {
      --bg1:#ffe9f2; --bg2:#e6f3ff;
      --card-bg:#fff8f5;
      --accent:#ff4f9a; --accent-soft:#ffe0f0;
      --text-main:#333;
      --shadow-soft:0 16px 35px rgba(0,0,0,0.07);
      --transition-fast:0.25s ease;
    }
    #fireworksCanvas{
      position: fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:999; /* behind everything */
} 
.screen, .app-shell{
  position:relative;
  z-index:2; /* content stays above fireworks */
}
    *{box-sizing:border-box;margin:0;padding:0;}
    body{
      min-height:100vh;
      font-family:"Poppins",system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      background:radial-gradient(circle at top left,var(--bg1),#fff),
                 radial-gradient(circle at bottom right,var(--bg2),#fff);
      background-attachment:fixed;
      color:var(--text-main);
      display:flex;align-items:center;justify-content:center;
      padding:16px;
    }
    .app-shell{
      width:100%;max-width:960px;min-height:520px;
      background:rgba(255,255,255,0.82);
      backdrop-filter:blur(20px);
      border-radius:32px;
      box-shadow:var(--shadow-soft);
      padding:24px;
      position:relative;
      overflow:hidden;
    }

    /* floating emojis */
    .floating-icon{
      position:absolute;font-size:26px;opacity:.7;
      animation:float 6s ease-in-out infinite;
      pointer-events:none;
    }
    .floating-icon:nth-child(1){top:12px;left:18px;animation-delay:-1s;}
    .floating-icon:nth-child(2){top:40px;right:24px;animation-delay:-2.3s;}
    .floating-icon:nth-child(3){bottom:18px;left:30px;animation-delay:-3.7s;}
    .floating-icon:nth-child(4){bottom:36px;right:40px;animation-delay:-4.5s;}
    @keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-12px);}}

    /* screens */
    .screen{
  display:none;
  min-height:420px;              /* smaller height */
  padding:20px;
  border-radius:24px;
  background:linear-gradient(145deg,#fffdfc,#fff4fa);
  position:relative;
}

/* screen becomes narrow */
#screen{
  max-width:300px;
  margin:40px auto;
}

    .screen.active{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      animation:fadeInUp .5s ease;
    }
    @keyframes fadeInUp{
      from{opacity:0;transform:translateY(10px);}
      to{opacity:1;transform:translateY(0);}
    }

    .badge{
      font-size:12px;
      padding:4px 10px;
      border-radius:999px;
      background:var(--accent-soft);
      color:var(--accent);
      margin-bottom:12px;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    h1,h2,h3{text-align:center;margin-bottom:8px;}
    h1{font-size:28px;font-weight:700;}
    p.lead{
      font-size:14px;
      text-align:center;
      max-width:480px;
      color:#666;
      margin-bottom:18px;
    }

    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 22px;border-radius:999px;border:none;cursor:pointer;
      font-size:14px;font-weight:600;text-decoration:none;
      transition:transform var(--transition-fast),box-shadow var(--transition-fast),background var(--transition-fast);
      box-shadow:0 10px 20px rgba(255,79,154,0.25);
      background:linear-gradient(135deg,#ff6fb5,#ff4f9a);
      color:#fff;
    }
    .btn:hover{transform:translateY(-1px);box-shadow:0 12px 24px rgba(255,79,154,0.3);}
    .btn:active{transform:translateY(0);box-shadow:0 6px 14px rgba(255,79,154,0.18);}
    .btn-secondary{
      background:#f3f5fb;color:#555;box-shadow:none;
    }
    .btn-secondary:hover{background:#e5e8f7;}

    .small-text{font-size:12px;color:#999;margin-top:10px;text-align:center;}

    /* generic card */
    .card{
      background:var(--card-bg);
      border-radius:22px;
      box-shadow:var(--shadow-soft);
      padding:20px 18px;
      max-width:600px;
      width:100%;
    }

    /* love letter scroll */
    .letter-body-scroll{
      max-height:260px;
      overflow-y:auto;
      text-align:left;
      padding-right:4px;
      font-size:14px;
      line-height:1.6;
    }
    .letter-body-scroll p{margin-bottom:10px;}

    /* cake */
    .cake-wrap{display:flex;justify-content:center;margin-top:10px;}
    #cakeCanvas{
      border-radius:20px;
      background:#ffe5ef;
      touch-action:none;
    }
    .hint{font-size:12px;opacity:.8;text-align:center;max-width:480px;}

    .gif-wrapper{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:8px;
    }
    .gif-wrapper img{
      max-width:220px;
      border-radius:16px;
      box-shadow:0 10px 18px rgba(0,0,0,0.1);
    }

    /* wish cards */
    .cards-wrapper{width:100%;max-width:720px;margin-top:16px;}
    .cards-grid{
      display:grid;
      grid-template-columns:repeat(3,minmax(0,1fr));
      gap:16px;
    }
    .message-card{perspective:900px;cursor:pointer;}
    .message-card-inner{
      position:relative;
      width:100%;
      min-height:150px;
      border-radius:18px;
      transform-style:preserve-3d;
      transition:transform .6s;
    }
    .message-card-front,
    .message-card-back{
      position:absolute;
      inset:0;
      backface-visibility:hidden;
      border-radius:18px;
      background:var(--card-bg);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:16px;
      box-shadow:0 12px 22px rgba(0,0,0,0.04);
    }
    .message-card-front span{font-size:30px;}
    .message-card-back{text-align:center;font-size:13px;color:#555;transform:rotateY(180deg);}
    .message-card.flipped .message-card-inner{transform:rotateY(180deg);}
    .cards-note{margin-top:16px;font-size:12px;color:#777;text-align:center;}

    /* final hug + hearts */
    .letter-layout{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:20px;
      max-width:620px;
      width:100%;
    }
    .letter-card-final{
      background:var(--card-bg);
      border-radius:22px;
      padding:22px 20px;
      box-shadow:var(--shadow-soft);
      width:100%;
      line-height:1.6;
      font-size:14px;
      position:relative;
      white-space:pre-line;
    }
    .hug-stage{
      background:#ffeef6;
      border-radius:18px;
      padding:12px;
      box-shadow:0 14px 26px rgba(0,0,0,0.06);
      width:100%;
      max-width:360px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
      position:relative;
      overflow:hidden;
    }
    .hug-gif{
      width:220px;
      max-width:100%;
      border-radius:16px;
      background:#fff;
      box-shadow:0 10px 18px rgba(0,0,0,0.08);
    }
    .hug-gif img{
      width:100%;
      display:block;
      border-radius:16px;
    }
    .hug-caption{font-size:12px;color:#777;text-align:center;}

    .heart{
      position:absolute;
      font-size:20px;
      opacity:0;
      pointer-events:none;
      animation:heartFloat 1.1s ease-out forwards;
    }
    @keyframes heartFloat{
      0%{transform:translate3d(0,0,0) scale(0.8);opacity:0;}
      15%{opacity:1;}
      100%{transform:translate3d(0,-60px,0) scale(1.2);opacity:0;}
    }

    footer{
      margin-top:16px;
      font-size:11px;
      text-align:center;
      color:#888;
    }

    @media (max-width:720px){
      .app-shell{padding:16px;}
      .screen{padding:18px 14px;}
      .cards-grid{grid-template-columns:1fr;}
      h1{font-size:24px;}
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- floating emojis -->
    <div class="floating-icon">üí´</div>
    <div class="floating-icon">üíå</div>
    <div class="floating-icon">üå∏</div>
    <div class="floating-icon">üíñ</div>

    <!-- 1) INTRO -->
    <canvas id = "fireworksCanvas"></canvas>
    <section class="screen active" id="screen-1">
      <div class="badge"><span>üíå</span> A tiny birthday website, just for you</div>
      <h1>Happy birthday my Love! üíï</h1>
      <p class="lead">
        Today is all about celebrating the most amazing boy in my world.
        I made something magical gift just for you on your special day‚Ä¶
      </p>
      <p class="lead" style="font-size:13px;margin-top:-4px;">
        Kalyan, are u ready for your birthday surprise? üß∏‚ú®
      </p>
      <button class="btn" id="startExperienceBtn">
        Open my heart <span>‚ú®</span>
      </button>
      <p class="small-text">
        (Tip: view in full screen for the cutest experience!)
      </p>
    </section>

    <!-- 2) LOVE LETTER -->
    <section class="screen" id="screen-2">
      <div class="badge"><span>üíñ</span> A Birthday Love Letter</div>
      <h2>From my heart to my birthday king üëë</h2>
      <div class="card">
        <div class="letter-body-scroll">
          <p><strong>My dearest cuteee kalyan,</strong></p>
          <p>Today marks another year of your beautiful existence, and I‚Äôm so grateful that I get to celebrate it with you. You bring joy, comfort and the cutest chaos into my life.</p>
          <p>Thank you for loving me when I‚Äôm happy, moody, dramatic and everything in between. With you I feel safe, seen and so, so loved.</p>
          <p>You deserve all the magic this world can offer ‚Äì soft mornings, peaceful nights, big victories and the quiet little wins no one else notices.</p>
          <p>My wish is simple: may this year be gentle with your heart and kind to your dreams. And I promise to stand beside you through it all.</p>
          <p>Happy birthday, my favourite person.</p>
          <p>Forever yours,<br><em>Anu</em> üíó</p>
        </div>
      </div>
      <div style="margin-top:18px;">
        <button class="btn" onclick="goTo(3)">Take me to the cake üéÇ</button>
      </div>
    </section>

    <!-- 3) CAKE CUT -->
    <section class="screen" id="screen-3">
      <div class="badge"><span>üéÇ</span> It‚Äôs Cake Time!</div>
      <h2>First blow the candle‚Ä¶ then cut the cake ‚úÇÔ∏è</h2>
      <p class="hint">
        Step 1: Tap ‚ÄúBlow the candle‚Äù ‚Ä¢ Step 2: Drag your finger/mouse across the cake to slice it.
      </p>

      <div class="cake-wrap">
        <canvas id="cakeCanvas" width="300" height="200"></canvas>
      </div>

      <!-- shown while drawing cut line -->
      <div id="cuttingGif" class="gif-wrapper" style="display:none;margin-top:8px;">
        <img src="https://tenor.com/bs5CJFQ3alk.gif"
             alt="Milk and Mocha eating cake">
      </div>

      <!-- shown after pressing Cut Cake -->
      <div id="feedGifBox" class="gif-wrapper" style="display:none;margin-top:8px;">
        <img src="https://media.tenor.com/r3C7-6I3MIEAAAAM/milk-mocha-eat.gif"
             alt="Milk and Mocha final kiss">
      </div>

      <div style="margin-top:14px;display:flex;flex-direction:column;gap:10px;align-items:center;">
        <button class="btn" onclick="blowCandle()">Blow the candle üïØÔ∏èüí®</button>
        <button class="btn" id="cutBtn" onclick="cutCake()" disabled>
          Cut &amp; Share the Cake üç∞
        </button>
      </div>
      <p class="small-text" id="cakeNote">
        Blow the candle first, then cut the cake. ü§≠
      </p>

      <div style="margin-top:18px;">
        <button class="btn btn-secondary" id="toCardsBtn" onclick="goTo(4)" disabled>
          Open your birthday wishes üíå
        </button>
      </div>
    </section>

    <!-- 4) WISH CARDS -->
<section class="screen" id="screen-4">
  <div class="badge"><span>‚ú®</span> Some special wishes for you</div>
  <h2>Tap each card to reveal a message</h2>
  <p class="lead">
    Every card hides a small wish for your new year. Open all three, then see your final hug message.
  </p>

  <div class="cards-wrapper">
    <div class="cards-grid">

      <!-- WISH 1 -->
      <div class="message-card" data-card="1">
        <div class="message-card-inner">
          <div class="message-card-front">
            <img src="https://media.tenor.com/gfvqqHmak90AAAAM/bear.gif" class="card-gif" alt="Wish 1">
            <div>Wish 1</div>
          </div>
          <div class="message-card-back">
            This year, may every effort you make quietly turn into something beautiful for you.
          </div>
        </div>
      </div>

      <!-- WISH 2 -->
      <div class="message-card" data-card="2">
        <div class="message-card-inner">
          <div class="message-card-front">
            <img src="https://media.tenor.com/hVKdI6YgjB0AAAAM/cute-bear-silvia-emoji.gif" class="card-gif" alt="Wish 2">
            <div>Wish 2</div>
          </div>
          <div class="message-card-back">
            May your mind stay peaceful, your heart stay strong, and you always find a soft place in my arms.
          </div>
        </div>
      </div>

      <!-- WISH 3 -->
      <div class="message-card" data-card="3">
        <div class="message-card-inner">
          <div class="message-card-front">
            <img src="https://media.tenor.com/iO4ts8Iro7UAAAAM/mocha-and-milk-bears-milk.gif" class="card-gif" alt="Wish 3">
            <div>Wish 3</div>
          </div>
          <div class="message-card-back">
            I wish success, money and endless opportunities chase you, just like my calls and messages do. üòå
          </div>
        </div>
      </div>

    </div>

    <p class="cards-note" id="cardsNote">
      Open all 3 cards to continue. üíû
    </p>
  </div>

  <div style="margin-top:18px;">
    <button class="btn btn-secondary" id="finalMsgBtn" onclick="goTo(5)" disabled>
      See my final hug message ü§ç
    </button>
  </div>
</section>

    <!-- 5) HUG + FINAL MESSAGE -->
    <section class="screen" id="screen-5">
      <div class="badge"><span>üß∏</span> Final Hug</div>

      <div class="letter-layout">
        <div class="hug-stage" id="hugStage">
          <div class="hug-gif">
            <img
              src="https://media.tenor.com/owSXAc8yVpAAAAAi/milk-and-mocha-kiss-cheek.gif"
              alt="Milk and Mocha hug"
            />
          </div>
          <div class="hug-caption">
            One big warm virtual hug from me to you, tightly wrapped around your birthday. ü§ç
          </div>
        </div>

        <div class="letter-card-final">
To the boy I love the most,

If I could wrap all my feelings into one gift, it would be this moment ‚Äì you, reading this, knowing exactly how precious you are to me.

Whenever life feels heavy, I want you to remember memories with me and know that there is one girl who is always on your side, praying for you, rooting for you and loving you like crazy.

Thank you for being my favourite message, my favourite call, my favourite hug and my favourite home. I‚Äôm so proud of you, and I‚Äôm so excited to see every version of your future.

No matter how many birthdays pass, I hope I‚Äôm there for all of them ‚Äì  fighting and patching up with you, and loving you a little more every year.

Happy birthday, my forever boy. This heart is sealed with your name on it.

With all my love,
Anu üíå
        </div>
      </div>

      <div style="margin-top:20px;display:flex;flex-direction:column;gap:10px;align-items:center;">
        <button class="btn" id="virtualHugBtn">Send me a virtual hug back ü§ó</button>
        <button class="btn-secondary btn" onclick="goTo(1)">
          Restart the surprise üîÅ
        </button>
      </div>
    </section>

    <footer>Made with silly love and soft bear hugs üß∏üíï</footer>
  </div>

  <!-- BACKGROUND MUSIC ‚Äì put song.mp3 in same folder or change src -->
  <audio id="bgm" src="c:\Users\Asus\Downloads\dude_telugu_boomboom (online-audio-converter.com).mp3" loop></audio>

  <script>
    
    /* ---------- screen navigation ---------- */
    const screens = document.querySelectorAll(".screen");
    function goTo(n){
      screens.forEach((s,idx)=>{
        s.classList.toggle("active", idx === n-1);
      });
      window.scrollTo({top:0,behavior:"smooth"});
    }
    window.goTo = goTo;

    const startBtn = document.getElementById("startExperienceBtn");
    startBtn.addEventListener("click", ()=>{
      const bgm = document.getElementById("bgm");
      if(bgm){
        bgm.play().catch(()=>{});
      }
      goTo(2);
    });
    // ------------- DIWALI FIREWORKS (intro page) ------------- //
const fwCanvas = document.getElementById("fireworksCanvas");
if (fwCanvas) {
  const fwCtx = fwCanvas.getContext("2d");

  function resizeFireworks() {
    fwCanvas.width = window.innerWidth;
    fwCanvas.height = window.innerHeight;
  }
  resizeFireworks();
  window.addEventListener("resize", resizeFireworks);

  let fwParticles = [];

  function spawnFirework() {
    // Only spawn when intro screen is active
    const active = document.querySelector(".screen.active");
    if (!active || active.id !== "screen-1") return;

    const x = Math.random() * fwCanvas.width;
    const y = Math.random() * fwCanvas.height * 1.5;
    const colors = ["#ffd54f","#ff4081","#ff6f00","#76ff03","#40c4ff","#e040fb"];
    const color = colors[Math.floor(Math.random()*colors.length)];
    const count = 1000;

    for (let i = 0; i < count; i++) {
      const angle = (Math.PI * 2 * i) / count;
      const speed = 2 + Math.random() * 2;
      fwParticles.push({
        x,
        y,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed,
        life: 0,
        maxLife: 40 + Math.random()*20,
        color
      });
    }
  }

  function updateFireworks() {
    fwCtx.clearRect(0,0,fwCanvas.width,fwCanvas.height);

    fwParticles = fwParticles.filter(p => p.life < p.maxLife);
    fwParticles.forEach(p => {
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.02;              // gravity
      p.life++;

      const alpha = 1 - p.life / p.maxLife;
      fwCtx.save();
      fwCtx.globalAlpha = alpha;
      fwCtx.fillStyle = p.color;
      fwCtx.beginPath();
      fwCtx.arc(p.x, p.y, 2.2, 0, Math.PI*2);
      fwCtx.fill();
      fwCtx.restore();
    });
    requestAnimationFrame(updateFireworks);
  }

  // spawn fireworks every 600ms
  setInterval(spawnFirework, 600);
  updateFireworks();
}

    /* ---------- CAKE: drawing + candle ---------- */
    const canvas = document.getElementById("cakeCanvas");
    const cutBtn = document.getElementById("cutBtn");
    const cakeNote = document.getElementById("cakeNote");
    const toCardsBtn = document.getElementById("toCardsBtn");
    const cuttingGif = document.getElementById("cuttingGif");
    const feedGifBox = document.getElementById("feedGifBox");
    let candleOn = true;
    let drawing = false;
    let ctx;

    if(canvas){
      ctx = canvas.getContext("2d");

      function drawCake(){
        ctx.clearRect(0,0,canvas.width,canvas.height);

        // plate
        ctx.fillStyle="#f7dfe9";
        ctx.beginPath();
        ctx.ellipse(150,160,120,20,0,0,Math.PI*2);
        ctx.fill();

        // cake body
        const grad=ctx.createLinearGradient(0,60,0,150);
        grad.addColorStop(0,"#ffe3f0");
        grad.addColorStop(1,"#ffb6c9");
        ctx.fillStyle=grad;
        ctx.beginPath();
        ctx.ellipse(150,120,90,50,0,0,Math.PI*2);
        ctx.fill();

        // top icing
        ctx.fillStyle="#fff2fb";
        ctx.beginPath();
        ctx.ellipse(150,90,80,30,0,0,Math.PI*2);
        ctx.fill();

        // drips
        ctx.fillStyle="#ffd0e6";
        for(let x=95;x<=205;x+=22){
          ctx.beginPath();
          ctx.ellipse(x,115,6,10,0,0,Math.PI*2);
          ctx.fill();
        }

        // swans
        drawSwan(130,82,true);
        drawSwan(170,82,false);

        // heart
        ctx.fillStyle="#ff6f9f";
        ctx.beginPath();
        ctx.moveTo(150,60);
        ctx.bezierCurveTo(145,52,135,52,135,60);
        ctx.bezierCurveTo(135,68,150,74,150,80);
        ctx.bezierCurveTo(150,74,165,68,165,60);
        ctx.bezierCurveTo(165,52,155,52,150,60);
        ctx.fill();

        // candle
        if(candleOn){
          ctx.fillStyle="#ff4b8b";
          ctx.fillRect(145,40,10,30);
          ctx.beginPath();
          ctx.ellipse(150,32,6,10,0,0,Math.PI*2);
          ctx.fillStyle="#ffb400";
          ctx.fill();
        }else{
          ctx.strokeStyle="rgba(120,120,120,0.7)";
          ctx.lineWidth=2;
          ctx.beginPath();
          ctx.moveTo(150,42);
          ctx.quadraticCurveTo(155,32,148,25);
          ctx.stroke();
        }
      }

      function drawSwan(cx,cy,left){
        ctx.fillStyle="#ffffff";
        // body
        ctx.beginPath();
        ctx.ellipse(cx,cy+8,10,6,0,0,Math.PI*2);
        ctx.fill();
        // neck
        ctx.beginPath();
        if(left){
          ctx.moveTo(cx,cy+5);
          ctx.quadraticCurveTo(cx-5,cy-5,cx,cy-10);
        }else{
          ctx.moveTo(cx,cy+5);
          ctx.quadraticCurveTo(cx+5,cy-5,cx,cy-10);
        }
        ctx.lineWidth=3;
        ctx.strokeStyle="#ffffff";
        ctx.stroke();
        // head
        ctx.beginPath();
        ctx.arc(cx,cy-11,4,0,Math.PI*2);
        ctx.fill();
        // beak
        ctx.beginPath();
        ctx.moveTo(cx + (left?-4:4), cy-11);
        ctx.lineTo(cx + (left?-8:8), cy-10);
        ctx.lineTo(cx + (left?-4:4), cy-9);
        ctx.fillStyle="#ffb36f";
        ctx.fill();
      }

      drawCake();

      function getPos(e){
        const rect=canvas.getBoundingClientRect();
        if(e.touches && e.touches[0]){
          return {
            x:e.touches[0].clientX-rect.left,
            y:e.touches[0].clientY-rect.top
          };
        }
        return {x:e.offsetX,y:e.offsetY};
      }

      function startDraw(e){
        if(candleOn) return;
        e.preventDefault();
        drawing=true;
        cuttingGif.style.display="flex";
        const pos=getPos(e);
        ctx.strokeStyle="#ff3e86";
        ctx.lineWidth=4;
        ctx.beginPath();
        ctx.moveTo(pos.x,pos.y);
      }
      function draw(e){
        if(!drawing) return;
        e.preventDefault();
        const pos=getPos(e);
        ctx.lineTo(pos.x,pos.y);
        ctx.stroke();
      }
      function endDraw(){
        drawing=false;
        cuttingGif.style.display="none";
      }

      canvas.addEventListener("mousedown",startDraw);
      canvas.addEventListener("mousemove",draw);
      canvas.addEventListener("mouseup",endDraw);
      canvas.addEventListener("mouseleave",endDraw);
      canvas.addEventListener("touchstart",startDraw,{passive:false});
      canvas.addEventListener("touchmove",draw,{passive:false});
      canvas.addEventListener("touchend",endDraw,{passive:false});

      window.blowCandle = function(){
        if(!candleOn) return;
        candleOn=false;
        drawCake();
        cakeNote.textContent="Now draw across the cake to cut it ‚úÇÔ∏è";
        cutBtn.disabled=false;
      };

      window.cutCake = function(){
        feedGifBox.style.display="flex";
        cutBtn.disabled=true;
        cakeNote.textContent="Yay! Cake is cut. Now open your birthday wishes üíå";
        toCardsBtn.disabled=false;
      };
    }

    /* ---------- WISH CARDS ---------- */
    const cards = document.querySelectorAll(".message-card");
    const cardsNote = document.getElementById("cardsNote");
    const finalMsgBtn = document.getElementById("finalMsgBtn");
    let openedCount = 0;

    cards.forEach(card=>{
      card.addEventListener("click",()=>{
        const inner = card;
        const already = card.dataset.opened === "yes";
        card.classList.toggle("flipped");
        if(!already){
          card.dataset.opened = "yes";
          openedCount++;
          if(openedCount >= cards.length){
            cardsNote.textContent = "All wishes opened! Tap the button below for your final hug message. ü§ç";
            finalMsgBtn.disabled = false;
          }
        }
      });
    });

    /* ---------- final virtual hug hearts ---------- */
    const hugStage = document.getElementById("hugStage");
    const virtualHugBtn = document.getElementById("virtualHugBtn");

    function addHeartBurst(){
      const rect = hugStage.getBoundingClientRect();
      const xBase = rect.width/2;
      const yBase = rect.height/2;

      [0,150,270].forEach((delay,i)=>{
        setTimeout(()=>{
          const h=document.createElement("div");
          h.className="heart";
          h.textContent = i===0 ? "üíó" : (i===1 ? "üíñ" : "üíû");
          const offsetX=(Math.random()-0.5)*40;
          const offsetY=(Math.random()-0.5)*20;
          h.style.left=(xBase+offsetX)+"px";
          h.style.top=(yBase+offsetY)+"px";
          hugStage.appendChild(h);
          setTimeout(()=>h.remove(),1200);
        },delay);
      });
    }

    virtualHugBtn.addEventListener("click",addHeartBurst);
  </script>
</body>
</html>


